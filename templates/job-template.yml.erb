- name: lint-<%= branch_name %>
  plan:
  - get: git-branch
    resource: git-branch-<%= branch_name %>
    params: {depth: 20}
    trigger: true
  - get: concourse-configs
    resource: concourse-configs
    params: {depth: 20}
    trigger: true
  - task: lint-task
    file: concourse-configs/tasks/lint.yml
    config:
      params:
        branch: <%= branch_name %>
  - put: lint-reports-<%= branch_name%>

- name: unit-tests-<%= branch_name %>
  plan:
  - get: git-branch
    resource: git-branch-<%= branch_name %>
    params: {depth: 20}
    trigger: true
  - get: concourse-configs
    resource: concourse-configs
    params: {depth: 20}
    trigger: true
  - task: unit-tests-task
    file: concourse-configs/tasks/unit-tests.yml
    config:
      params:
        branch: <%= branch_name %>
  - put: unit-test-reports-<%= branch_name%>
